<<<<<<< HEAD
# cargo-rail configuration for Polars
=======
# cargo-rail configuration for polars
>>>>>>> 905e24ad2 (cargo-rail-polars: updated unify for correct numbers in README of cargo-rail; fixed change-detection and CI workflow)
# Optimized for the leanest build graph and precise change detection

# Platform targets for multi-target validation
targets = [
  # Tier 2 (Common)
  "wasm32-unknown-unknown",
]

[unify]
<<<<<<< HEAD
include_paths = true
include_renamed = true # polars uses renamed deps (memmap=memmap2, old_getrandom=getrandom)
pin_transitives = false
transitive_host = "root"
exclude = []
include = []
msrv = true
strict_version_compat = false
exact_pin_handling = "warn"
major_version_conflict = "bump"
detect_unused = true
remove_unused = true
prune_dead_features = true
max_backups = 3


[release]
tag_prefix = "v" # Prefix for all tags (used via {prefix} in tag_format)
tag_format = "{crate}-{prefix}{version}" # Variables: {prefix}, {crate}, {version}
require_clean = true
publish_delay = 5
create_github_release = false
sign_tags = false
changelog_path = "CHANGELOG.md"
changelog_relative_to = "crate" # "crate" or "workspace" (default: crate)
=======
include_paths = true  # Handle path dependencies (default: true)
include_renamed = false  # Handle renamed dependencies (package = "...") (default: false)
pin_transitives = false  # Pin transitive-only deps (workspace-hack replacement, enable for hakari users) (default: false)
transitive_host = "root"  # Where to put pinned transitive dev-deps: "root" or path like "crates/foo"
exclude = []  # Dependencies to skip unification (safety hatch)
include = []  # Dependencies to force unification (safety hatch)
msrv = true  # Compute and write rust-version to workspace manifest (default: true)
strict_version_compat = true  # Treat version mismatches as errors (default: true)
exact_pin_handling = "preserve"  # How to handle =x.y.z pins: skip, preserve, warn (default: warn)
major_version_conflict = "bump"  # How to handle major version conflicts: warn (skip), bump (force highest) (default: warn)
detect_unused = true  # Detect unused dependencies (default: true)
remove_unused = true  # Auto-remove unused deps when applying (default: true)
max_backups = 3  # Number of backup files to keep (default: 3)
prune_dead_features = true  # Remove features never enabled in resolved graph (default: true)


[release]
tag_prefix = "rs-"  # polars uses rs-X.Y.Z for Rust releases
tag_format = "{prefix}{version}"  # e.g., rs-0.52.0
require_clean = true
publish_delay = 5
create_github_release = true
sign_tags = false
changelog_path = "CHANGELOG.md"
changelog_relative_to = "workspace"
>>>>>>> 905e24ad2 (cargo-rail-polars: updated unify for correct numbers in README of cargo-rail; fixed change-detection and CI workflow)
skip_changelog_for = []
require_changelog_entries = false


[change-detection]
<<<<<<< HEAD
infrastructure = [
  # CI/CD
  ".github/workflows/**",
  ".github/actions/**",
  ".github/scripts/**",

  # Build system
  "Makefile",
=======
# Files that trigger full workspace rebuild when changed
infrastructure = [
  # CI workflows that affect Rust builds
  ".github/workflows/test-rust.yml",
  ".github/workflows/lint-rust.yml",
  ".github/workflows/release-rust.yml",
>>>>>>> 905e24ad2 (cargo-rail-polars: updated unify for correct numbers in README of cargo-rail; fixed change-detection and CI workflow)

  # Rust workspace/toolchain
  "Cargo.lock",
  "rust-toolchain.toml",
  "rustfmt.toml",
<<<<<<< HEAD

  # Code quality
  "dprint.json",
  ".typos.toml",
=======
  ".cargo/config.toml",

  # Build system
  "Makefile",
  "crates/Makefile",
>>>>>>> 905e24ad2 (cargo-rail-polars: updated unify for correct numbers in README of cargo-rail; fixed change-detection and CI workflow)

  # cargo-rail config
  ".config/rail.toml",
]

[change-detection.custom]
<<<<<<< HEAD
# Documentation (allows docs-only skip)
docs = [
  "docs/**",
  "py-polars/docs/**",
  "*.md",
  "LICENSE",
  "mkdocs.yml",
]

# Python bindings (py-polars)
python = [
  "py-polars/**",
]

# PyO3 bindings
pyo3 = [
  "pyo3-polars/**",
]

# Examples
examples = [
  "examples/**",
]

# Nix configuration
nix = [
  "*.nix",
  "flake.lock",
]

=======
# Python bindings (separate CI pipeline)
python = [
  "py-polars/**",
  "pyo3-polars/**",
  ".github/workflows/test-python.yml",
  ".github/workflows/lint-python.yml",
  ".github/workflows/release-python.yml",
]

# Nix/flake configuration
nix = [
  "flake.nix",
  "flake.lock",
]

# Benchmarks (separate CI job)
benchmarks = [
  ".github/workflows/benchmark*.yml",
]

>>>>>>> 905e24ad2 (cargo-rail-polars: updated unify for correct numbers in README of cargo-rail; fixed change-detection and CI workflow)

# Split/Sync: Use 'cargo rail split init <crate>' to configure individual crates
# Per-crate configuration uses [crates.<name>] sections:
#
# [crates.my-crate.split]
# remote = "git@github.com:org/my-crate.git"
# branch = "main"
# mode = "single"  # "single" or "combined"
# paths = [{ crate = "crates/my-crate" }]
#
# Split modes:
#   single   - One crate per split repo (default)
#   combined - Multiple crates share one split repo
#              Use workspace_mode = "workspace" to mirror monorepo structure
#
# [crates.my-crate.release]
# publish = true
